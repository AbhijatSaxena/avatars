<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <style>
      body {
        text-align: center;
        font-family: Arial, Helvetica, sans-serif;
        font-size: 14px;
      }

      label {
        display: block;
        margin-top: 20px;
        margin-bottom: 3px;
      }
    </style>
  </head>
  <body>
    <div id="avatar"><img id="avatar-image" /></div>

    <label for="sprite-set">Sprite Set</label>
    <select id="sprite-set"></select>

    <label for="seed">Seed</label>
    <input id="seed" type="text" value="Jane Doe" />

    <label for="size">Size</label>
    <input id="size" type="number" value="200" min="0" max="500" />

    <script src="https://cdn.jsdelivr.net/g/async@2.3.0(async.min.js),chance@1.0.6,one-color@2.4.0"></script>
    <script src="./dist/avatars.js"></script>

    <script>
      var avatars = {};
      var avatar = document.getElementById('avatar');
      var seed = document.getElementById('seed');
      var size = document.getElementById('size');
      var spriteSets = document.getElementById('sprite-set');

      Object.keys(Avatars.SPRITE_SETS).forEach(function (spriteSet) {
        var option = document.createElement('option');
        option.value = spriteSet;
        option.text = spriteSet;

        spriteSets.appendChild(option);

        avatars[spriteSet] = new Avatars(Avatars.SPRITE_SETS[spriteSet]);
      });
      
      function reloadAvatar() {
        var seedValue = seed.value;

        avatars[spriteSets.value].create(
          seedValue, function(err, image) {
            if (seed.value === seedValue) {
              avatar.replaceChild(image, document.getElementsByTagName('img')[0]);
            }
          },
          {size: size.value}
        );
      }

      spriteSets.addEventListener('change', reloadAvatar);
      seed.addEventListener('input', reloadAvatar);
      size.addEventListener('input', reloadAvatar);
      reloadAvatar();
    </script>
  </body>
</html>